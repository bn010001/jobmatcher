spring:
  application:
    name: jobmatcher_api

  datasource:
    url: jdbc:postgresql://localhost:5432/jobmatcher
    username: jobmatcher_user
    password: secret
    driver-class-name: org.postgresql.Driver
  
  jpa:
    open-in-view: false
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
    show-sql: true

  flyway:
    enabled: true
    locations: classpath:db/migration

  servlet:
    multipart:
      enabled: true
      max-file-size: 10MB
      max-request-size: 12MB

server:
  port: 8080

# Config servizio AI (in dev locale)
jobmatcher:
  ai:
    base-url: http://localhost:8000
    # DEV con docker-compose (nome servizio)
    # base-url: http://jobmatcher-ai:8000
    # PROD (esempio)
    # base-url: https://ai.mycompany.com

  storage:
    provider: local  # local | s3 | azure
    local:
      root-dir: ./data/cv        # verr√† creata se non esiste (consigliato)
    # s3:
    #   bucket: jobmatcher-cv-prod
    #   region: eu-west-1
    #   endpoint: https://s3.amazonaws.com
    #   access-key: ${S3_ACCESS_KEY}
    #   secret-key: ${S3_SECRET_KEY}
    # azure:
    #   container: jobmatcher-cv-prod
    #   connection-string: ${AZURE_STORAGE_CONNECTION_STRING}

  cv:
    allowed-content-types:
      - application/pdf
      - application/vnd.openxmlformats-officedocument.wordprocessingml.document # docx
    max-size-bytes: 10485760 # 10MB

  security:
    jwt:
      secret: "CHANGE_ME_very_long_secret_at_least_48_chars_1234567890abcdef"
      expiration-minutes: 60
      issuer: "jobmatcher"

    dev-user:
      username: dev
      password: dev123
      roles: [ "DEV", "ADMIN", "CANDIDATE", "COMPANY" ]

logging:
  level:
    root: INFO
    org.springframework.web: INFO
